<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  </head>
  <body>
    <table class="table">
  	<thead>
    <tr>
      <th scope="col">번호</th>
      <th scope="col">제목</th>
      <th scope="col">출발지</th>
      <th scope="col">목적지</th>
      <th scope="col">출발시간</th>
      <th scope="col">작성자</th>
    </tr>
  </thead>
  <tbody>
    <!--<tr th:each="board : ${paging}">-->
    <tr th:each="board : ${paging}">
      <td th:text="${board.boardNo}">Mark</td>
      <td><a th:text="${board.boardTitle}" th:href="@{/board/form(boardNo=${board.boardNo})}">Mark</a></td>
      <td th:text="${board.boardStartpoint}">Otto</td>
      <td th:text="${board.boardEndpoint}">@mdo</td>
      <td th:text="${board.boardStarttime}">@mdo</td>
      <td th:text="${board.memberId}">@mdo</td>
    </tr>
    
    <!--
    <th:block th:each="page:${#numbers.sequence(startPage, endPage)}">
      <a th:if="${page != nowPage}" th:href="@{/board/list(page=${page - 1})}" th:text="${page}"></a>
      <strong th:if="${page==nowPage}" th:text="${page}" style="color:red"></strong>
    </th:block>
    -->
    
    
  </tbody>
  </table>

	
    
	
	<!--<table class="table">
  	<thead>
    <tr>
      <th scope="col">번호</th>
      <th scope="col">제목</th>
      <th scope="col">출발지</th>
      <th scope="col">목적지</th>
      <th scope="col">출발시간</th>
      <th scope="col">작성자</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="board : ${boards}">
      <td th:text="${board.boardNo}">Mark</td>
      <td><a th:text="${board.boardTitle}" th:href="@{/board/form(boardNo=${board.boardNo})}">Mark</a></td>
      <td th:text="${board.boardStartpoint}">Otto</td>
      <td th:text="${board.boardEndpoint}">@mdo</td>
        <td th:text="${board.boardStarttime}">@mdo</td>
      <td th:text="${board.memberId}">@mdo</td>
    </tr>
  </tbody>
</table>
  <div class="text-align:right">
    <a type="button" th:href="@{/board/form}">글올리기</a>
  </div>-->
  
  <!--
  
  <div class="container">
	<h2>test게시판</h2>
	<div>총 건수 : <span th:text="${#lists.size(boards)}"></span></div>
	<div class="board">
      <div class="board_no">번호</div>
      <div class="board_title">제목</div>
      <div class="board_startpoint">출발지</div>
      <div class="board_endpoint">목적지</div>
      <div class="board_starttime">출발시간</div>
      <div class="member_id">작성자</div>
      <div class="arrow"></div>
    </div>
    <div class="text-align:right">
      <a type="button" th:href="@{/board/form}">글올리기</a>
    </div>
    <div class="pagegroup">
      PREV 1 2 3 4 NEXT
    </div>
    
    
    
  <script>
    let loginedId = 'admin'; //테스트용
  
    function showList(url, data) {
      $.ajax({
        url: url,
        method: 'get',
        data: data,
        success: function (jsonObj) {
          if (jsonObj.status == 1) {
            let pageBeanObj = jsonObj.t;

            let $board = $('div.board').first();
            $('div.board').not($board).remove();

            let $boardParent = $board.parent();
            $(pageBeanObj.list).each(function (index, board) {
              let $boardCopy = $board.clone();//복제본
              $boardCopy.find("div.board_no").html(board.boardNo);
              $boardCopy.find("div.board_title").html(board.boardTitle);
              $boardCopy.find("div.board_startpoint").html(board.boardStartpoint);
              $boardCopy.find("div.board_endpoint").html(board.boardEndpoint);
              $boardCopy.find("div.board_starttime").html(board.boardStarttime);
              $boardCopy.find("div.arrow").addClass("down");
              $boardParent.append($boardCopy);
            });

            let $pagegroup = $('div.pagegroup')
            let $pagegroupHtml = '';
            if (pageBeanObj.startPage > 1) {
              $pagegroupHtml += '<span class="prev">PREV</span>';
            }
            for (let i = pageBeanObj.startPage; i <= pageBeanObj.endPage; i++) {
              $pagegroupHtml += '&nbsp;&nbsp;';
              if (pageBeanObj.currentPage == i) { //현재페이지인 경우 <span>태그 안만듦
                $pagegroupHtml += '<span class="disabled">' + i + '</span>';
              } else {
                $pagegroupHtml += '<span>' + i + '</span>';
              }
            }
            if (pageBeanObj.endPage < pageBeanObj.totalPage) {
              $pagegroupHtml += '&nbsp;&nbsp;';
              $pagegroupHtml += '<span class="next">NEXT</span>';
            }

            $pagegroup.html($pagegroupHtml);
          } else {
            alert(jsonObj.msg);
          }
        },
        error: function (jqXHR) {
          alert("에러:" + jqXHR.status);
        }
      });
    }

    //---페이지 로드되자 마자 게시글1페이지 검색 START---
    showList('http://localhost:7990/board/findcarlist', 'currentPage=1')
    //---페이지 로드되자 마자 게시글1페이지 검색 END---

    //---페이지 그룹의 페이지를 클릭 START---
    $('div.pagegroup').on('click', 'span:not(.disabled)', function () {
      let pageNo = 1;
        if ($(this).hasClass('prev')) {
          pageNo = parseInt($(this).next().html()) - 1;
        } else if ($(this).hasClass('next')) {
          pageNo = parseInt($(this).prev().html()) + 1;
        } else {
          pageNo = parseInt($(this).html());
        }
        // alert("보려는 페이지번호: " + pageNo);
        let word = $('div.search>div.searchInput>input[name=word]').val().trim();
        let url = '';
        let data = '';
        if (word == '') {
          url = 'http://localhost:7990/board/findcarlist';
          data = 'currentPage=' + pageNo;
        } else {
          url = 'http://localhost:7990/board/findcarlist';
          data = 'currentPage=' + pageNo + '&word=' + word;
        }
        showList(url, data);
        return false;
    });
    //---페이지 그룹의 페이지를 클릭 END---
  </script>
  -->
	
</body>

</html>